# About
[This](https://github.com/kvnu/sbcli.git) repository is currently mirrored on [GitLab](https://gitlab.gwdg.de/l.keiser/sbcli.git).
Current `MVP` version: `0.1.0`
Some features are still missing, but the core functionality is there.


`sbcli` is a command line interface for the SmartBeans[^sb_gitlab] application.

# Installation

We have release for Linux, Windows and MacOS. You can find them [here](https://github.com/KVNU/sbcli/releases).

## Building from source
### Prerequisites

- [Rust](https://www.rust-lang.org/tools/install)
- [Cargo](https://doc.rust-lang.org/cargo/getting-started/installation.html)

OpenSSL is required for the `reqwest` crate, which we use for HTTP requests. See [here](https://docs.rs/reqwest/latest/reqwest/index.html#tls) for more information.

### Building

`cargo build --release`

### Installing
`cargo install --path <project_dir>`

# Usage

### Prerequisites

A SmartBeans account which has password authentication enabled. Token login is wip.
As of the latest commit, it's not possible to use the local dev server, because the CLI uses the production API, which is, for some reason, slightly different from the dev server. A flexible solution for this is wip.

### Commands

The CLI is organized into subcommands. To see a list of available subcommands, run `sbcli --help`.
You'll need to configure the CLI before you can use it. Run
```sh
sbcli config -u USERNAME -c COURSE --host HOST
```
 with all required arguments to do so.

If you're not logged in, it'll ask if you want to do so. Otherwise, run `sbcli login` to log in.

Then you'll want to run `sbcli sync` to download the exercise directory from SmartBeans, if you haven't done so during configuration. This will create a directory called `tasks` at `<home_dir>/sbcli`. You can change this by setting the `SBCLI_EXERCISE_DIR` environment variable(wip).

Next, you can run `sbcli start` to start a new exercise. By default, this will open the next exercise in order using your default editor.

Once you're done, you can run `sbcli submit PATH_TO_SOLUTION` to submit your solution to SmartBeans.

It's currently **not** possible to submit files are **not in a workspace**.

Run `sbcli list` to see a list of all exercises in the exercise directory and their current status.

# Design

## High Level Goals

### Core functionality

- Allow users to authenticate on the command line
  - [x] Allow login via username/password or OAuth/LTI
  - [ ] Allow login via a long-lived session token generated by an API call or via the SmartBeans interface. This would eliminate the need to setup a password for the CLI.
- Facilitate a user's ability to interact with the SmartBeans applications exercise directory via the command line.
  - [x] Allow downloading exercises from SmartBeans via the command line
  - [x] Manage a local directory structure for exercises
  - [ ] Allow running tests for local exercises
  - [x] Allow users to submit local exercises to SmartBeans
  - [x] Allow users to view the status of their submitted exercises

### Optional functionality

- Facilitate a user's ability to interact with other parts of SmartBeans locally on the CLI, e.g. viewing the leaderboard.
- Gamification features

[^sb_gitlab]: https://gitlab.gwdg.de/smart/smartbeans
